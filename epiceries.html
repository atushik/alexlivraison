<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>Épiceries | AlexLivraison</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    :root{--violet:#6b23ff;}
    html,body{height:100%;margin:0;padding:0;background:linear-gradient(180deg,#32006b 10%,#7a2cf5 100%);color:#fff;font-family:sans-serif}
    .menu-bar{display:flex;justify-content:space-between;padding:10px}.brand img{height:40px}
    .header-row{text-align:center}.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;padding:15px}
    .product-card{background:#fff;color:#000;border-radius:15px;padding-bottom:10px;text-align:center}
    .product-img{width:100%;height:120px;object-fit:cover;border-radius:15px 15px 0 0}
    .product-price{color:#6b23ff;font-weight:bold;font-size:1.1em}
  </style>
</head>
<body>
  <div class="menu-bar">
    <div class="brand"><img src="logo.jpg" alt="AlexLivraison"></div>
    <a href="produits.html" style="color:#fff">Retour</a>
  </div>
  <div class="header-row"><h1>Épiceries</h1></div>
  <div class="products-grid" id="products-list">Chargement...</div>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAWagPwv5Skh_EHfdcnFTYeG-xltRM7yPc",
      authDomain: "alex-livraison.firebaseapp.com",
      projectId: "alex-livraison",
      storageBucket: "alex-livraison.firebasestorage.app",
      messagingSenderId: "937475497279",
      appId: "1:937475497279:web:62dc9eba8e77a5113ec78a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const grid = document.getElementById('products-list');
    db.collection('products').where('category', '==', 'epicerie').get().then((snap) => {
      grid.innerHTML = '';
      if(snap.empty) { grid.innerHTML='Aucun produit.'; return; }
      snap.forEach((doc) => {
        const p = doc.data();
        grid.innerHTML += `
          <div class="product-card">
            <img src="${p.imageUrl}" class="product-img">
            <h3>${p.name}</h3>
            <p>${p.desc}</p>
            <div class="product-price">${p.price} €</div>
          </div>`;
      });
    });
  </script>
</body>
</html>
