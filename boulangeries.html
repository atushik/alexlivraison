<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>Boulangeries Partenaires | AlexLivraison</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    :root{--violet:#6b23ff;}
    html,body{height:100%;margin:0;padding:0;background:linear-gradient(180deg,#32006b 10%,#7a2cf5 100%);}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#fff;}
    *{box-sizing:border-box;}
    .menu-bar{display:flex;justify-content:space-between;align-items:center;padding:18px 11px 10px 10px;}
    .brand img{height:47px;}
    .menu-btn{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:4.5px;width:40px;height:40px;border-radius:9px;background:#fff2;border:1.7px solid #ececff;cursor:pointer;}
    .menu-btn span{display:block;width:22px;height:4px;background:#fff;border-radius:4px;transition:.24s;}
    .menu-list{position:fixed;top:0;left:0;right:0;bottom:0;z-index:11;background:rgba(34,0,54,.97);display:none;flex-direction:column;}
    .menu-list.visible{display:flex;}
    .menu-list-inner{margin:auto;padding:40px 0;display:flex;flex-direction:column;align-items:center;gap:23px;}
    .menu-link{padding:18px 54px;background:#fff2;color:#fff;font-weight:800;font-size:1.23em;border-radius:19px;text-decoration:none;transition:.11s;}
    .menu-link:hover{background:#fff;color:#6b23ff;}
    .close-btn{position:absolute;top:23px;right:21px;font-size:2.4em;color:#fff;background:none;border:none;cursor:pointer;}
    .header-row{text-align:center;margin-top:7px;}
    .title{font-size:2.13em;font-weight:900;margin:8px 0 0 0;letter-spacing:-1px;}
    .subtitle{font-size:1.10em;color:#f5e4ff;}
    .search-row{display:flex;gap:0.7em;margin:27px 0;}
    .search{flex:1;padding:15px;font-size:1em;border-radius:13px;border:1.8px solid #e5dcfa;background:#fbf9ff;color:#3a1e7a;margin-right:10px;}
    .filter-select{padding:14px 17px;font-size:1em;border-radius:13px;border:1.5px solid #d7d0fc;background:#f7f2ff;font-weight:700;color:#6b23ff;}
    .products-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:18px 14px;padding-bottom:28px;}
    .product-card{background:#fff;border-radius:17px;box-shadow:0 5px 24px #2e065622;padding:0 0 10px 0;display:flex;flex-direction:column;align-items:center;transition:.11s;}
    .product-card:hover{box-shadow:0 12px 36px #8676d528;}
    .product-img{width:100%;height:100px;object-fit:cover;border-radius:17px 17px 0 0;background:#ede6fd;}
    .product-name{font-size:1em;font-weight:900;color:#591be7;text-align:center;margin:7px 6px 2px;}
    .product-cat{background:#ece4ff;color:#773af2;border-radius:7px;padding:2px 10px;font-size:0.83em;margin:3px 0 7px;}
    .product-desc{font-size:0.98em;color:#45307c;margin:0 7px;text-align:center;min-height:21px;}
    .product-price{font-size:1.12em;font-weight:800;color:#23b572;margin-top:5px;}
    .promo{background:linear-gradient(88deg,#fffbe2 40%,#ffd48c 100%);border-radius:13px;padding:12px 0 8px 0;text-align:center;font-weight:800;color:#ad821c;font-size:1.07em;margin:23px 0 17px 0;}
    .footer-link{margin:0 auto 24px auto;display:block;text-align:center;font-weight:800;color:#fff;border-radius:12px;background:#fff2;padding:11px 30px 13px 30px;max-width:350px;text-decoration:none;}
    .footer-link:hover{background:#fff;color:#6b23ff;}
    @media(max-width:1200px){.products-grid{grid-template-columns:repeat(4,1fr);}}
    @media(max-width:900px){.products-grid{grid-template-columns:repeat(3,1fr);}}
    @media(max-width:700px){.products-grid{grid-template-columns:repeat(2,1fr);}}
    @media(max-width:520px){.products-grid{grid-template-columns:1fr 1fr;}.title{font-size:1.17em;}}
  </style>
</head>
<body>
  <div class="menu-bar">
    <div class="brand"><img src="logo.jpg" alt="AlexLivraison"></div>
    <button class="menu-btn" id="btn-menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  <div class="menu-list" id="menu">
    <button class="close-btn" id="close-menu">&times;</button>
    <div class="menu-list-inner">
      <a href="index.html" class="menu-link">Accueil</a>
      <a href="produits.html" class="menu-link">Produits & Partenaires</a>
      <a href="supermarches.html" class="menu-link">Supermarch√©s</a>
      <a href="restaurants.html" class="menu-link">Restaurants</a>
      <a href="pharmacies.html" class="menu-link">Pharmacies</a>
      <a href="boulangeries.html" class="menu-link">Boulangeries</a>
      <a href="about.html" class="menu-link">√Ä propos</a>
    </div>
  </div>
  <div class="header-row">
    <div class="title" id="main-title">Boulangeries partenaires</div>
    <div class="subtitle" id="main-sub">D√©couvrez les meilleurs pains, viennoiseries et douceurs des boulangeries locales.</div>
  </div>
  <form class="search-row" onsubmit="event.preventDefault()">
    <select class="filter-select" id="filter-cat">
      <option value="">Tous</option>
      <option value="Pains">Pains</option>
      <option value="Viennoiseries">Viennoiseries</option>
      <option value="P√¢tisseries">P√¢tisseries</option>
    </select>
    <input type="text" class="search" id="search" placeholder="Rechercher une sp√©cialit√©">
  </form>
  <div class="promo" id="promo-banner">ü•ñ Livraison du four chaque matin, commandez vos classiques ou nouveaut√©s!</div>
  
  <div class="products-grid" id="products-list"></div>
  
  <a href="produits.html" class="footer-link" id="to-main">‚Üê Tous les produits partenaires</a>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAWagPwv5Skh_EHfdcnFTYeG-xltRM7yPc",
      authDomain: "alex-livraison.firebaseapp.com",
      projectId: "alex-livraison",
      storageBucket: "alex-livraison.appspot.com",
      messagingSenderId: "937475497279",
      appId: "1:937475497279:web:62dc9eba8e77a5113ec78a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById('btn-menu').onclick=()=>{document.getElementById('menu').classList.add('visible')};
    document.getElementById('close-menu').onclick=()=>{document.getElementById('menu').classList.remove('visible')};
    
    let lang='fr';
    const dict={
      fr:{
        title:"Boulangeries partenaires",
        sub:"D√©couvrez les meilleurs pains, viennoiseries et douceurs des boulangeries locales.",
        promo:"ü•ñ Livraison du four chaque matin, commandez vos classiques ou nouveaut√©s!",
        searchPH:"Rechercher une sp√©cialit√©",
        cat:["Tous","Pains","Viennoiseries","P√¢tisseries"]
      },
      en:{
        title:"Bakery Partners",
        sub:"Discover the best breads and pastries from local bakeries.",
        promo:"ü•ñ Fresh from the oven every morning, order your favorites!",
        searchPH:"Search for a bakery item",
        cat:["All","Breads","Pastries","Cakes"]
      }
    };
    document.getElementById('main-title').onclick=()=>{
      lang=lang==='fr'?'en':'fr';setLang();
    };
    function setLang(){
      document.getElementById('main-title').textContent=dict[lang].title;
      document.getElementById('main-sub').textContent=dict[lang].sub;
      document.getElementById('promo-banner').textContent=dict[lang].promo;
      document.getElementById('search').placeholder=dict[lang].searchPH;
      const catSel=document.getElementById('filter-cat');
      for(let i=0;i<catSel.options.length;i++){if(catSel.options[i].text) catSel.options[i].text=dict[lang].cat[i];}
      document.getElementById('to-main').textContent=lang==='fr'?'‚Üê Tous les produits partenaires':'‚Üê Back to all products';
    }
    setLang();

    let boulProds = [];

    function fetchBakeryProducts() {
      document.getElementById('products-list').innerHTML = '<div style="grid-column:1/-1;text-align:center">Chargement des produits...</div>';
      db.collection('products').where('category', '==', 'boulangerie').get().then((querySnapshot) => {
        boulProds = [];
        querySnapshot.forEach((doc) => {
          boulProds.push(doc.data());
        });
        renderProducts();
      }).catch((error) => {
        console.log("Error getting documents: ", error);
        document.getElementById('products-list').innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#ffabab">Erreur de chargement.</div>';
      });
    }

    function renderProducts(){
      let html='';
      let term=document.getElementById('search').value.toLowerCase().trim();
      
      let res=boulProds.filter(x=>(!term || x.name.toLowerCase().includes(term) || (x.desc && x.desc.toLowerCase().includes(term))));
      
      if(res.length === 0) {
         html = '<div style="grid-column:1/-1;text-align:center;padding:20px">Aucun produit trouv√©.</div>';
      } else {
        for(let p of res){
          html+=`<div class="product-card">
            <img src="${p.imageUrl}" class="product-img" alt="">
            <div class="product-name">${p.name}</div>
            <div class="product-desc">${p.desc||''}</div>
            <div class="product-cat">Boulangerie</div>
            <div class="product-price">${p.price} ‚Ç¨</div>
          </div>`;
        }
      }
      document.getElementById('products-list').innerHTML=html;
    }
    
    document.getElementById('search').oninput=renderProducts;
    document.getElementById('filter-cat').onchange=renderProducts;
    
    fetchBakeryProducts();
  </script>
</body>
</html>
