<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Produits Partenaires - AlexLivraison</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
  :root{--violet:#6b23ff;--violet-dark:#32006b;--green:#4caf50;--glass:rgba(255,255,255,0.95);}
  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
    background:linear-gradient(135deg,#32006b 0%,#7a2cf5 50%,#43dfb8 100%);
    background-size:200% 200%;
    animation:anim-bg 15s ease-in-out infinite;
    color:#222;
    min-height:100vh;
    overflow-x:hidden;
    background-attachment:fixed;
  }
  @keyframes anim-bg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  .wrap{max-width:1200px;margin:0 auto;padding:20px}
  
  /* Topbar */
  .topbar{
    display:flex;justify-content:space-between;align-items:center;padding:15px 20px;
    background:rgba(20,0,45,0.85);backdrop-filter:blur(15px);
    position:sticky;top:0;z-index:100;border-bottom:1px solid rgba(255,255,255,0.1);
  }
  .logo-img{
    width:50px;height:50px;object-fit:cover;border-radius:50%;
    border:2px solid rgba(255,255,255,0.8);box-shadow:0 4px 10px rgba(0,0,0,0.3);
  }
  
  /* Hamburger */
  .hamburger{width:45px;height:45px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:6px;background:rgba(255,255,255,0.15);border-radius:10px;cursor:pointer;transition:.3s}
  .hamburger:hover{background:rgba(255,255,255,0.25)}
  .hamburger span{width:24px;height:3px;background:#fff;border-radius:3px}

  /* Menu */
  .menu{position:fixed;top:0;right:-100%;width:300px;height:100vh;background:rgba(20,0,45,0.98);padding:80px 30px 30px;transition:right .4s;z-index:1000;overflow-y:auto;backdrop-filter:blur(10px)}
  .menu.open{right:0}
  .menu nav a{display:block;color:#fff;text-decoration:none;padding:15px;font-size:16px;border-radius:10px;margin-bottom:8px;background:rgba(255,255,255,0.05);transition:.3s}
  .menu nav a:hover{background:rgba(255,255,255,0.15);color:#b88aff}
  .menu .submenu-trigger{cursor:pointer;font-weight:700}
  .menu .submenu{display:none;background:rgba(107,35,255,0.2);border-radius:10px;margin-bottom:10px;padding:5px 0}
  .menu .submenu.visible{display:block}
  .menu .submenu a{padding-left:25px;font-size:15px;background:none}
  
  /* Lang switch */
  .lang-switch{margin-top:30px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.2);color:#fff}
  .lang-btns{display:flex;gap:10px;margin-top:10px}
  .lang-btns button{flex:1;padding:10px;background:transparent;border:1px solid rgba(255,255,255,0.3);color:#fff;border-radius:8px;cursor:pointer}
  .lang-btns button.active{background:#6b23ff;border-color:#6b23ff}

  /* Header Title */
  .page-header{text-align:center;margin:40px 0 30px;}
  .main-title{font-size:2.5em;font-weight:900;color:#fff;text-shadow:0 4px 15px rgba(0,0,0,0.2);display:flex;justify-content:center;align-items:center;gap:15px;flex-wrap:wrap}
  #emoji-car{display:inline-block;animation:carMove 2s infinite ease-in-out alternate}
  #emoji-biker{display:inline-block;animation:bounce 2s infinite ease-in-out alternate}
  @keyframes carMove{0%{transform:translateX(0)}100%{transform:translateX(15px)}}
  @keyframes bounce{0%{transform:translateY(0)}100%{transform:translateY(-10px)}}

  /* Promo */
  .promo-banner{background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%);padding:20px;border-radius:16px;text-align:center;margin-bottom:30px;animation:pulse 2.5s infinite ease-in-out;box-shadow:0 10px 30px rgba(255,100,50,0.3);border:2px solid rgba(255,255,255,0.5)}
  .promo-banner h2{font-size:22px;margin-bottom:5px;color:#d35400}
  .promo-banner p{font-size:16px;color:#d35400;font-weight:600}
  @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

  /* Filters */
  .filters-container{overflow-x:auto;padding-bottom:10px;margin-bottom:30px;text-align:center}
  .filters{display:inline-flex;gap:10px;padding:0 10px}
  .filter-btn{
    padding:12px 24px;background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.3);
    color:#fff;cursor:pointer;border-radius:50px;font-size:16px;transition:.3s;display:flex;align-items:center;gap:8px;white-space:nowrap;backdrop-filter:blur(5px);
  }
  .filter-btn:hover{background:rgba(255,255,255,0.3);transform:translateY(-2px)}
  .filter-btn.active{background:#fff;color:#6b23ff;border-color:#fff;font-weight:800;box-shadow:0 5px 15px rgba(0,0,0,0.2)}

  /* Grid */
  .products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px;margin-bottom:50px}
  .product-card{
    background:#fff;border-radius:20px;padding:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.1);transition:.3s;
    display:flex;flex-direction:column;position:relative;overflow:hidden;
  }
  .product-card:hover{transform:translateY(-8px);box-shadow:0 15px 35px rgba(0,0,0,0.2)}
  .product-img{width:100%;height:180px;object-fit:cover;border-radius:15px;margin-bottom:15px;background:#f0f0f0}
  .product-badge{
    position:absolute;top:25px;right:25px;background:rgba(255,255,255,0.9);
    padding:5px 12px;border-radius:20px;font-size:12px;font-weight:bold;color:#6b23ff;
    box-shadow:0 2px 10px rgba(0,0,0,0.1);
  }
  .product-name{font-size:18px;font-weight:800;margin-bottom:8px;color:#333}
  .product-price{font-size:20px;color:#6b23ff;margin-bottom:10px;font-weight:900}
  .product-desc{font-size:14px;color:#666;margin-bottom:15px;line-height:1.5;flex-grow:1}
  .btn-order{
    width:100%;padding:14px;background:linear-gradient(90deg,#6b23ff,#8e5aff);
    border:none;color:#fff;font-size:16px;border-radius:12px;cursor:pointer;transition:.3s;font-weight:bold;
  }
  .btn-order:hover{background:linear-gradient(90deg,#5a2ecc,#7b40f2);transform:scale(1.02)}

  footer{text-align:center;padding:30px 0;border-top:1px solid rgba(255,255,255,0.2);margin-top:auto;color:rgba(255,255,255,0.7);font-size:14px}

  @media(max-width:768px){.main-title{font-size:1.8em}.filters-container{justify-content:flex-start}}
</style>
</head>
<body>

<div class="topbar">
  <img src="logo.jpg" class="logo-img" alt="Logo">
  <div class="hamburger" id="hamburger">
    <span></span><span></span><span></span>
  </div>
</div>

<div class="menu" id="menu">
  <nav>
    <a href="#" class="submenu-trigger" id="openPartnerMenu">üõí Devenir partenaire vendeur</a>
    <div class="submenu" id="partnerSubmenu">
      <a href="form-supermarches.html" target="_blank">Propri√©taire de supermarch√©</a>
      <a href="form-boulangerie.html" target="_blank">Propri√©taire de boulangerie</a>
      <a href="form-pharmacies.html" target="_blank">Propri√©taire de pharmacie</a>
      <a href="form-restaurants.html" target="_blank">Propri√©taire de restaurant</a>
      <a href="form-epiceries.html" target="_blank">Propri√©taire d'√©picerie fine</a>
      <a href="form-commercants.html" target="_blank">Propri√©taire de commerce local</a>
      <a href="form-boucheries.html" target="_blank">Propri√©taire de boucherie</a>
      <a href="form-poissonneries.html" target="_blank">Propri√©taire de poissonnerie</a>
      <a href="form-fleuristes.html" target="_blank">Fleuriste</a>
      <a href="form-primeur.html" target="_blank">Primeur</a>
    </div>
    <a href="devenir-coursier.html">üö¥ Devenir partenaire coursier</a>
    <a href="index.html">üè† Retour √† la page d'accueil</a>
    <a href="index.html#contact">üìû Contactez-nous</a>
    <a href="about.html">‚ÑπÔ∏è √Ä propos de nous</a>
  </nav>
  <div class="lang-switch">
    <p>Langue / Language</p>
    <div class="lang-btns">
      <button class="active" id="langFr">FR</button>
      <button id="langEn">EN</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="page-header">
    <div class="main-title">
      <span id="emoji-biker">üö¥üèª‚Äç‚ôÇÔ∏è</span> AlexLivraison <span id="emoji-car">üöó</span>
    </div>
  </div>

  <div class="promo-banner">
    <h2>üéâ Promotion sp√©ciale!</h2>
    <p>Livraison gratuite sur toutes les commandes de nos partenaires ce mois-ci!</p>
  </div>

  <div class="filters-container">
    <div class="filters" id="filters">
      <button class="filter-btn active" data-category="all"><span class="emoji">üåü</span><span>Meilleurs Prix</span></button>
      <button class="filter-btn" data-category="boulangerie"><span class="emoji">ü•ñ</span><span>Boulangeries</span></button>
      <button class="filter-btn" data-category="supermarches"><span class="emoji">üõí</span><span>Supermarch√©s</span></button>
      <button class="filter-btn" data-category="boucheries"><span class="emoji">ü•©</span><span>Boucheries</span></button>
      <button class="filter-btn" data-category="poissonneries"><span class="emoji">üêü</span><span>Poissonneries</span></button>
      <button class="filter-btn" data-category="pharmacies"><span class="emoji">üíä</span><span>Pharmacies</span></button>
      <button class="filter-btn" data-category="restaurants"><span class="emoji">üçΩ</span><span>Restaurants</span></button>
      <button class="filter-btn" data-category="epicerie"><span class="emoji">üßÄ</span><span>√âpicerie</span></button>
      <button class="filter-btn" data-category="primeur"><span class="emoji">ü•¶</span><span>Primeurs</span></button>
      <button class="filter-btn" data-category="fleuristes"><span class="emoji">üíê</span><span>Fleuristes</span></button>
      <button class="filter-btn" data-category="commercants"><span class="emoji">üè™</span><span>Commer√ßants</span></button>
    </div>
  </div>

  <div class="products-grid" id="productsGrid"></div>

  <footer><p>¬© 2025 AlexLivraison - Tous droits r√©serv√©s</p></footer>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAWagPwv5Skh_EHfdcnFTYeG-xltRM7yPc",
  authDomain: "alex-livraison.firebaseapp.com",
  projectId: "alex-livraison",
  storageBucket: "alex-livraison.firebasestorage.app",
  messagingSenderId: "937475497279",
  appId: "1:937475497279:web:62dc9eba8e77a5113ec78a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const hamburger=document.getElementById('hamburger');
const menu=document.getElementById('menu');
hamburger.addEventListener('click',()=>{menu.classList.toggle('open');});

const openPartnerMenu=document.getElementById('openPartnerMenu');
const partnerSubmenu=document.getElementById('partnerSubmenu');
openPartnerMenu.onclick=function(e){
  e.preventDefault();
  partnerSubmenu.classList.toggle('visible');
};

const productsGrid=document.getElementById('productsGrid');
const filterBtns=document.querySelectorAll('.filter-btn');
const categoryPages={
  supermarches:'supermarches.html',
  boulangerie:'boulangeries.html',
  boucheries:'boucheries.html',
  poissonneries:'poissonneries.html',
  pharmacies:'pharmacies.html',
  restaurants:'restaurants.html',
  epicerie:'epicerie.html',
  commercants:'commercants.html',
  fleuristes:'fleuristes.html',
  primeur:'primeur.html'
};

function afficherProduitsFirestore(cat){
  productsGrid.innerHTML = '<div style="color:white;text-align:center;grid-column:1/-1">Chargement...</div>';
  let ref = db.collection('products');
  
  if(cat === 'all') {
    ref.orderBy('price').limit(12).get().then(snap => renderSnap(snap)).catch(e => console.error(e));
  } else {
    ref.where('category', '==', cat.toLowerCase()).get().then(snap => renderSnap(snap)).catch(e => console.error(e));
  }
}

function renderSnap(snap) {
  productsGrid.innerHTML = '';
  if(snap.empty) {
    productsGrid.innerHTML='<div style="color:#fff;text-align:center;padding:20px;grid-column:1/-1;background:rgba(255,255,255,0.1);border-radius:10px;">Aucun produit dans cette cat√©gorie pour le moment.</div>';
    return;
  }
  snap.forEach(doc=>{
    const p = doc.data();
    const div=document.createElement('div');
    div.className='product-card';
    div.onclick=()=>{
      let targetPage = categoryPages[p.category ? p.category.toLowerCase() : ''] || '#';
      if(targetPage !== '#') window.location.href=targetPage;
    };
    div.innerHTML=`
    <img src="${p.imageUrl || ''}" class="product-img" alt="${p.name}">
    <div class="product-badge">${p.category||''}</div>
    <div class="product-name">${p.name}</div>
    <div class="product-price">${p.price ? parseFloat(p.price).toFixed(2)+' ‚Ç¨' : ''}</div>
    <div class="product-desc">${p.desc||''}</div>
    <button class="btn-order">Commander</button>`;
    productsGrid.appendChild(div);
  });
}

let curCat='all';
afficherProduitsFirestore(curCat);

filterBtns.forEach(btn=>{
  btn.addEventListener('click',()=>{
    filterBtns.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    curCat=btn.dataset.category;
    if(curCat !== "all") {
      if(categoryPages[curCat]) {
        window.location.href = categoryPages[curCat];
        return;
      }
    }
    afficherProduitsFirestore(curCat);
  });
});

const langFr=document.getElementById('langFr');
const langEn=document.getElementById('langEn');
const langData = {
  fr: {
    pageTitle: 'Produits Partenaires - AlexLivraison',
    promoH2: 'üéâ Promotion sp√©ciale!',
    promoP: 'Livraison gratuite sur toutes les commandes de nos partenaires ce mois-ci!',
    menu: ["üõí Devenir partenaire vendeur", "üö¥ Devenir partenaire coursier", "üè† Retour √† la page d'accueil", "üìû Contactez-nous", "‚ÑπÔ∏è √Ä propos de nous"]
  },
  en: {
    pageTitle: 'Partner Products - AlexLivraison',
    promoH2: 'üéâ Special Promotion!',
    promoP: 'Free delivery on all partner orders this month!',
    menu: ["üõí Become a partner seller", "üö¥ Become a partner courier", "üè† Back to homepage", "üìû Contact us", "‚ÑπÔ∏è About us"]
  }
};

function setLanguage(lang){
  let data = langData[lang];
  document.title = data.pageTitle;
  langFr.classList.toggle('active', lang === 'fr');
  langEn.classList.toggle('active', lang === 'en');
  document.querySelector('.promo-banner h2').textContent = data.promoH2;
  document.querySelector('.promo-banner p').textContent = data.promoP;
  const navLinks = document.querySelectorAll('.menu nav > a:not(.submenu-trigger)');
  const menuData = langData[lang].menu;
  document.getElementById('openPartnerMenu').textContent = menuData[0];
  navLinks[0].textContent = menuData[1];
  navLinks[1].textContent = menuData[2];
  navLinks[2].textContent = menuData[3];
  navLinks[3].textContent = menuData[4];
  afficherProduitsFirestore(curCat);
}

langFr.onclick=function(){setLanguage('fr');};
langEn.onclick=function(){setLanguage('en');};
</script>
</body>
</html>
