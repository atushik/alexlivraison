<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>AlexLivraison - Service de Livraison Rapide</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
  <style>
    :root{--violet:#6b23ff;--violet-dark:#32006b;--green:#4caf50;--ring:#ffffff35;--glass:rgba(255,255,255,0.9);}
    html,body{height:100%;margin:0;padding:0;overflow-x:hidden;}
    body{
      font-family:'Segoe UI',system-ui,-apple-system,Roboto,Arial;
      color:#222;
      background:linear-gradient(135deg,#32006b 0%,#7a2cf5 50%,#43dfb8 100%);
      background-size:200% 200%;
      animation:anim-bg 15s ease-in-out infinite;
      background-attachment:fixed;
      display:flex;
      flex-direction:column;
      align-items:center;
    }
    @keyframes anim-bg {
      0%{background-position:0% 50%;}
      50%{background-position:100% 50%;}
      100%{background-position:0% 50%;}
    }
    *{box-sizing:border-box}
    img{max-width:100%;height:auto;display:block}
    .wrap{width:100%;max-width:1060px;margin:0 auto;padding:16px;}
    .topbar{position:sticky;top:0;z-index:100;width:100%;backdrop-filter:blur(15px);background:rgba(20,0,45,0.75);border-bottom:1px solid var(--ring);}
    .topbar-inner{display:flex;align-items:center;gap:14px;justify-content:space-between;padding:12px 16px;}
    .brand img{width:120px;height:auto;}
    .hamb{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);cursor:pointer;}
    .hamb span,.hamb::before,.hamb::after{content:"";position:absolute;width:22px;height:2.5px;background:#fff;border-radius:2px;transition:.3s;}
    .hamb span{top:50%;transform:translateY(-50%)}
    .hamb::before{top:11px}
    .hamb::after{bottom:11px}
    .drawer{position:fixed;inset:0;z-index:110;pointer-events:none;}
    .drawer .shade{position:absolute;inset:0;background:rgba(0,0,0,0.7);opacity:0;transition:.3s;}
    .drawer .panel{position:absolute;left:-280px;top:0;bottom:0;width:280px;background:#14002b;color:#fff;box-shadow:10px 0 30px rgba(0,0,0,0.5);padding:20px;display:flex;flex-direction:column;gap:15px;transition:.3s;}
    .drawer.open{pointer-events:auto;}
    .drawer.open .shade{opacity:1;}
    .drawer.open .panel{left:0;}
    .drawer a{color:#fff;text-decoration:none;padding:14px;border-radius:12px;background:rgba(255,255,255,0.1);font-weight:600;transition:.2s}
    .drawer a:hover{background:rgba(255,255,255,0.2);padding-left:20px}
    .drawer .langs{margin-top:auto;display:flex;gap:10px;}
    .drawer .langs button{flex:1;background:transparent;border:1px solid rgba(255,255,255,0.3);color:#fff;padding:12px;border-radius:10px;cursor:pointer;font-weight:bold;}
    .drawer .langs button.active{background:#6b23ff;border-color:#6b23ff}
    .hero{padding:40px 16px 20px;color:#fff;text-align:center;position:relative;}
    .h2{color:#fff;margin:0 0 15px 0;font-weight:900;text-align:center;font-size:2.4em;letter-spacing:-1px;text-shadow:0 4px 20px rgba(0,0,0,0.2)}
    .muted{color:#efecfb;opacity:.95;text-align:center;font-size:1.2em;max-width:650px;margin:0 auto;line-height:1.5}
    #emoji-car{margin-left:8px;display:inline-block;animation:carMove 1.5s infinite alternate;}
    #emoji-biker{margin-right:8px;display:inline-block;animation:bounce 1.5s infinite alternate;}
    @keyframes carMove{0%{transform:translateX(0);}100%{transform:translateX(15px);}}
    @keyframes bounce{0%{transform:translateY(0);}100%{transform:translateY(-10px);}}
    @keyframes pulse-green{0%{box-shadow:0 0 0 0 rgba(76,175,80,0.7)}70%{box-shadow:0 0 0 15px rgba(76,175,80,0)}}
    .btn-coursier{margin:25px auto 15px;display:block;background:linear-gradient(90deg,#43dfb8,#6b23ff);color:#fff;border:none;font-weight:800;padding:18px 30px;border-radius:50px;font-size:1.2em;box-shadow:0 10px 25px rgba(107,35,255,0.3);transition:.2s;cursor:pointer;text-decoration:none;width:fit-content}
    .btn-coursier:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 15px 35px rgba(107,35,255,0.5)}
    .promo-banner{display:flex;align-items:center;justify-content:space-between;gap:20px;background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);border-radius:20px;padding:25px;margin:20px auto;max-width:820px;box-shadow:0 10px 30px rgba(255, 100, 50, 0.3);animation:slide-up 0.8s ease-out, promo-pulse 2.5s infinite ease-in-out;cursor:pointer;border:2px solid rgba(255,255,255,0.6);text-decoration:none}
    @keyframes promo-pulse {
      0% { transform: scale(1); box-shadow: 0 10px 30px rgba(255, 100, 50, 0.3); }
      50% { transform: scale(1.02); box-shadow: 0 15px 45px rgba(255, 100, 50, 0.5); border-color:#fff; }
      100% { transform: scale(1); box-shadow: 0 10px 30px rgba(255, 100, 50, 0.3); }
    }
    @keyframes slide-up{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}
    .promo-info{color:#8a2be2;}
    .promo-info span{display:block;}
    .promo-emoji{font-size:3em;animation:bounce 2s infinite}
    .party-anim{display:inline-block;animation:party-wiggle 3.5s infinite ease-in-out;transform-origin:bottom center}
    @keyframes party-wiggle{0%{transform:rotate(0deg)}25%{transform:rotate(-20deg)}75%{transform:rotate(20deg)}100%{transform:rotate(0deg)}}
    .stats-bar{display:flex;justify-content:space-around;flex-wrap:wrap;gap:15px;background:rgba(20,0,45,0.6);backdrop-filter:blur(10px);padding:20px;border-radius:16px;margin-bottom:30px;border:1px solid rgba(255,255,255,0.1);color:#fff;text-align:center}
    .stat-item h3{font-size:1.8em;margin:0;color:#43dfb8;font-weight:900}
    .stat-item p{margin:5px 0 0;font-size:0.9em;opacity:0.8}
    .steps-section{text-align:center;padding:20px 0;color:#fff}
    .steps-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:20px}
    .step-card{background:rgba(255,255,255,0.1);padding:20px;border-radius:16px;border:1px solid rgba(255,255,255,0.2)}
    .step-icon{font-size:2.5em;margin-bottom:10px;display:block}
    .card{background:var(--glass);border-radius:20px;padding:25px;box-shadow:0 20px 50px rgba(0,0,0,0.2);width:100%;margin-bottom:25px;backdrop-filter:blur(10px);}
    .form-label-row{display:flex;align-items:center;gap:10px;margin-top:12px;font-weight:700;color:#32006b}
    .form-label-row .label-anim{font-size:1.35em;display:inline-block;animation:bounce 2s infinite alternate;}
    input,select{width:100%;padding:16px;margin-top:8px;border-radius:12px;border:1px solid #ddd;outline:none;font-size:1.05em;background:#fff}
    input:focus,select:focus{border-color:#6b23ff;box-shadow:0 0 0 4px rgba(107,35,255,0.1)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:10px;}
    .service{border:1px solid #eee;border-radius:12px;padding:12px;font-size:1em;background:#f9f9ff;display:flex;align-items:center;gap:10px;cursor:pointer;transition:.2s}
    .service:hover{background:#fff;border-color:#6b23ff}
    .sticker-anim{display:inline-block;animation:bounce 1.8s infinite;}
    .box-anim{display:inline-block;animation:bounce 2.2s infinite;}
    button{width:100%;padding:16px;border:none;border-radius:14px;font-size:1.15em;margin-top:15px;font-weight:800;cursor:pointer;transition:.2s;display:flex;justify-content:center;align-items:center;gap:10px}
    button:active{transform:scale(0.98)}
    #calc{background:linear-gradient(135deg,#6b23ff,#8968fb);color:#fff;box-shadow:0 8px 20px rgba(107,35,255,0.3)}
    #payCard{background:#22c55e;color:#fff;box-shadow:0 8px 20px rgba(34,197,94,0.3)}
    #payCash{background:#fff;color:#32006b;border:2px solid #32006b}
    #result{display:none;background:#f0fdf4;border-radius:14px;border:1px solid #bbf7d0;margin-top:15px;padding:15px;font-size:1.1em;color:#166534}
    #map{display:none;height:350px;border-radius:16px;margin-top:15px;width:100%;box-shadow:0 5px 15px rgba(0,0,0,0.1)}
    .partners{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:20px}
    .partner{background:#fff;border-radius:16px;padding:20px 10px;display:flex;flex-direction:column;align-items:center;text-decoration:none;transition:.2s;box-shadow:0 5px 15px rgba(0,0,0,0.1);text-align:center}
    .partner:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,0.15)}
    .partner .stic{font-size:2.5em;margin-bottom:10px;display:block;animation:bounce 2s infinite alternate;}
    .partner span{font-weight:700;color:#32006b;font-size:0.95em}
    .reviews-scroller{display:flex;gap:15px;overflow-x:auto;padding-bottom:10px;scroll-behavior:smooth}
    .review-card{min-width:260px;background:rgba(255,255,255,0.15);padding:15px;border-radius:14px;color:#fff;border:1px solid rgba(255,255,255,0.2)}
    .stars{color:#ffd700;letter-spacing:2px}
    .faq-item{background:#fff;border-radius:12px;margin-bottom:10px;overflow:hidden}
    .faq-question{padding:15px;font-weight:700;color:#32006b;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .faq-answer{padding:0 15px 15px;color:#555;display:none;font-size:0.95em}
    .faq-item.active .faq-answer{display:block}
    .faq-item.active .faq-question{background:#f5f3ff}
    .footer{color:#e0e0e0;text-align:center;margin:30px 0;font-size:0.9em}
    .float-wa{position:fixed;bottom:25px;right:25px;background:#25D366;color:white;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:35px;box-shadow:0 5px 20px rgba(37,211,102,0.4);z-index:99;animation:pulse-green 2s infinite;text-decoration:none}
    .rocket-anim{display:inline-block;animation:bounce 1s infinite alternate;}
    @media(max-width:650px){
      .topbar-inner{padding:10px;}
      .h2{font-size:1.8em;}
      .grid{grid-template-columns:1fr;}
      .stats-bar{gap:10px;justify-content:center}
      .stat-item{width:45%}
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner wrap">
      <div class="brand"><img src="logo.jpg" alt="AlexLivraison"></div>
      <div class="hamb" id="btn-menu"><span></span></div>
    </div>
  </div>
  <div class="drawer" id="drawer">
    <div class="shade" id="shade"></div>
    <div class="panel">
      <img src="logo.jpg" alt="Logo" style="width:140px;margin-bottom:20px">
      <a href="produits.html" id="nav-calc">Produits D‚Äôaffiliation</a>
      <a href="about.html" id="nav-partners">√Ä propos</a>
      <a href="#" id="nav-contact">Chat Telegram</a>
      <div class="langs">
        <button id="btn-fr" class="active">FR</button>
        <button id="btn-en">EN</button>
      </div>
    </div>
  </div>
  <header class="hero wrap">
    <h1 class="h2" id="hero-title">
      <span id="emoji-biker">üö¥üèª‚Äç‚ôÇÔ∏è</span>
      <span id="hero-text">Livraison locale rapide √† Toulon & La Seyne</span>
      <span id="emoji-car">üöó</span>
    </h1>
    <p class="muted" id="hero-desc">Repas, courses, colis et petits envois ‚Äî √† v√©lo, scooter, auto. Commande en 30‚ÄØsecondes !</p>
  </header>
  <div class="wrap">
    <div class="stats-bar">
      <div class="stat-item"><h3>15k+</h3><p id="stat-1">Livraisons</p></div>
      <div class="stat-item"><h3>500+</h3><p id="stat-2">Clients</p></div>
      <div class="stat-item"><h3>30min</h3><p id="stat-3">Temps moyen</p></div>
      <div class="stat-item"><h3>4.9‚òÖ</h3><p id="stat-4">Note avis</p></div>
    </div>
  </div>
  <a href="devenir-coursier.html" class="btn-coursier"><span class="rocket-anim">üöÄ</span> <span id="btn-become">Devenir coursier</span></a>
  <a href="promotions.html" class="promo-banner" id="promo-block">
    <div class="promo-info">
      <span id="promo-title"><span class="party-anim">üéâ</span> Nouveaut√©s 2025 :</span>
      <span id="promo-subtitle">5 LIVRAISONS GRATUITES pour chaque nouveau client !</span>
      <span id="promo-desc" style="color:#5a32e8;font-weight:bold;font-size:0.95em;">Offres partenaires, prix r√©duits et cadeaux chaque semaine !</span>
    </div>
    <div class="promo-emoji">üéÅ</div>
  </a>
  <main class="wrap">
    <section class="steps-section">
      <h2 class="h2" style="font-size:1.8em" id="how-title">Comment √ßa marche ?</h2>
      <div class="steps-grid">
        <div class="step-card">
          <span class="step-icon">üì±</span>
          <b id="step-1-t">Commandez</b>
          <p id="step-1-d">Remplissez le formulaire ci-dessous en quelques clics.</p>
        </div>
        <div class="step-card">
          <span class="step-icon">‚ö°</span>
          <b id="step-2-t">On arrive</b>
          <p id="step-2-d">Un coursier proche r√©cup√®re votre colis ou commande.</p>
        </div>
        <div class="step-card">
          <span class="step-icon">üèÅ</span>
          <b id="step-3-t">Livr√© !</b>
          <p id="step-3-d">Livraison rapide en main propre √† destination.</p>
        </div>
      </div>
    </section>
    <section id="calc-section" class="section">
      <h2 class="h2" id="calc-title">Calcul du prix et commande</h2>
      <div class="card">
        <div class="form-label-row">
          <span class="label-anim">üë§</span>
          <span class="label-anim">‚úçÔ∏è</span>
          <label id="lbl-name">Nom du client (optionnel)</label>
        </div>
        <input id="clientName" placeholder="Jean Dupont">
        <div class="form-label-row"><span class="sticker">üì±</span><label id="lbl-phone">Num√©ro de t√©l√©phone du client</label></div>
        <input id="clientPhone" placeholder="+33 6 12 34 56 78" required>
        <div class="form-label-row"><span class="sticker">üì¶</span><label id="lbl-from">Adresse de d√©part</label></div>
        <input id="from" placeholder="Ex : 2 Rue Beaussier, Toulon">
        <div class="form-label-row"><span class="sticker">üèÅ</span><label id="lbl-to">Adresse de destination</label></div>
        <input id="to" placeholder="Ex : 241 Rue Le Corbusier, La Seyne">
        <div class="grid">
          <div>
            <div class="form-label-row"><span class="sticker">üõç</span><label id="lbl-size">Taille du colis</label></div>
            <select id="size">
              <option value="S" id="opt-s">Petit (S)</option>
              <option value="M" selected id="opt-m">Moyen (M)</option>
              <option value="L" id="opt-l">Grand (L)</option>
              <option value="XL" id="opt-xl">Tr√®s grand (XL)</option>
            </select>
          </div>
          <div>
            <div class="form-label-row"><span class="sticker">üè¢</span><label id="lbl-floor">√âtage</label></div>
            <select id="floor">
              <option value="0" id="opt-f0">RDC / 1er (0 ‚Ç¨)</option>
              <option value="2" id="opt-f2">2e‚Äì5e (+2 ‚Ç¨)</option>
              <option value="2.5" id="opt-f25">6e‚Äì10e (+2,5 ‚Ç¨)</option>
              <option value="3" id="opt-f3">11e‚Äì15e (+3 ‚Ç¨)</option>
            </select>
          </div>
        </div>
        <div class="grid">
          <div><div class="form-label-row"><span class="sticker">üìÖ</span><label id="lbl-date">Date de livraison</label></div><input type="date" id="date"></div>
          <div><div class="form-label-row"><span class="sticker">‚è∞</span><label id="lbl-time">Heure souhait√©e</label></div><select id="time"></select></div>
        </div>
        <div class="form-label-row"><span class="sticker">üîß</span><label id="lbl-add">Services additionnels</label></div>
        <div class="grid">
          <label class="service"><span class="box-anim">üì¶</span><input type="checkbox" class="srv" data-fee="2"><span id="srv1">Fragile (+2‚Ç¨)</span></label>
          <label class="service"><span class="sticker sticker-anim">üö®</span><input type="checkbox" class="srv" data-fee="3"><span id="srv2">Urgent (+3‚Ç¨)</span></label>
          <label class="service"><span class="sticker sticker-anim">‚è±Ô∏è</span><input type="checkbox" class="srv" data-fee="1"><span id="srv3">Attente 5min (+1‚Ç¨)</span></label>
          <label class="service"><span class="sticker sticker-anim">‚è±Ô∏è</span><input type="checkbox" class="srv" data-fee="2"><span id="srv4">Attente 10min (+2‚Ç¨)</span></label>
        </div>
        <div class="form-label-row"><span class="sticker">üí∂</span><label id="lbl-total">Montant total (‚Ç¨)</label></div>
        <input id="total" readonly style="font-weight:bold;font-size:1.3em;color:#6b23ff">
        <button id="calc">üßÆ Calculer le prix</button>
        <button id="payCard">üí≥ Paiement par carte</button>
        <button id="payCash">üí∂ Paiement en esp√®ces</button>
        <div id="result"></div>
        <div id="map"></div>
      </div>
    </section>
    <section id="partners" class="section">
      <h2 class="h2" id="partners-title">Produits Partenaires</h2>
      <div class="partners">
        <a href="supermarches.html" target="_blank" class="partner"><span class="stic">üõí</span><span id="p1">Supermarch√©s</span></a>
        <a href="boulangeries.html" target="_blank" class="partner"><span class="stic">ü•ê</span><span id="p2">Boulangeries</span></a>
        <a href="pharmacies.html" target="_blank" class="partner"><span class="stic">üíä</span><span id="p3">Pharmacies</span></a>
        <a href="restaurants.html" target="_blank" class="partner"><span class="stic">üç£</span><span id="p4">Restaurants</span></a>
        <a href="epiceries.html" target="_blank" class="partner"><span class="stic">üßÄ</span><span id="p5">√âpiceries</span></a>
        <a href="commercants.html" target="_blank" class="partner"><span class="stic">üì¶</span><span id="p6">Commer√ßants</span></a>
        <a href="boucheries.html" target="_blank" class="partner"><span class="stic">ü•©</span><span>Boucheries</span></a>
        <a href="poissonneries.html" target="_blank" class="partner"><span class="stic">üêü</span><span>Poissonneries</span></a>
      </div>
    </section>
    <section class="section">
      <h2 class="h2" id="rev-title">Avis Clients</h2>
      <div class="reviews-scroller">
        <div class="review-card">
          <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <p>"Service impeccable ! Livraison en 20 min, coursier tr√®s poli."</p>
          <small>- Sophie M.</small>
        </div>
        <div class="review-card">
          <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <p>"Tr√®s pratique pour les courses de derni√®re minute. Je recommande."</p>
          <small>- Pierre L.</small>
        </div>
        <div class="review-card">
          <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <p>"L'application est simple et le prix est juste. Merci Alex !"</p>
          <small>- Amina K.</small>
        </div>
      </div>
    </section>
    <section class="section">
      <h2 class="h2">FAQ</h2>
      <div class="faq-item">
        <div class="faq-question" onclick="this.parentNode.classList.toggle('active')">Quelles sont les zones de livraison ? <span style="float:right">+</span></div>
        <div class="faq-answer">Nous livrons principalement sur Toulon, La Seyne-sur-Mer et les environs proches.</div>
      </div>
      <div class="faq-item">
        <div class="faq-question" onclick="this.parentNode.classList.toggle('active')">Combien co√ªte la livraison ? <span style="float:right">+</span></div>
        <div class="faq-answer">Le prix d√©pend de la distance (environ 0.90‚Ç¨/km) et des options choisies. Utilisez le calculateur ci-dessus !</div>
      </div>
    </section>
    <section id="contact" class="section">
      <h2 class="h2" id="contact-title">Contactez-nous</h2>
      <div class="card" style="text-align:center">
        <div class="muted" style="margin-bottom:15px;color:#47346c;">
          AlexLivraison ‚Äî La Seyne-sur-Mer/Toulon<br>
          üìû 06 77 17 11 88 ¬∑ üìß atushbek020185@gmail.com
        </div>
        <div style="display:flex;justify-content:center;flex-wrap:wrap;gap:10px">
          <a href="https://wa.me/33677171188" target="_blank" style="padding:12px 20px;background:#25D366;color:#fff;border-radius:10px;text-decoration:none;font-weight:800;">üí¨ WhatsApp</a>
          <a href="tel:+33677171188" style="padding:12px 20px;background:#6b23ff;color:#fff;border-radius:10px;text-decoration:none;font-weight:800;">üì≤ Appeler</a>
          <a href="mailto:atushbek020185@gmail.com" style="padding:12px 20px;background:#32006b;color:#fff;border-radius:10px;text-decoration:none;font-weight:800;">‚úâÔ∏è E-mail</a>
        </div>
      </div>
    </section>
    <div class="year">2025</div>
    <div class="footer">¬© AlexLivraison</div>
    <div style="display:flex;justify-content:center;margin:20px 0 40px 0;">
      <img src="QR-code.jpg" alt="QR Code" style="width:120px;border-radius:14px;box-shadow:0 8px 32px rgba(255,255,255,0.1);">
    </div>
  </main>
  <a href="https://wa.me/33677171188" class="float-wa" target="_blank">üí¨</a>
  <script>
    document.addEventListener('DOMContentLoaded',function(){
      const drawer=document.getElementById('drawer');
      const shade=document.getElementById('shade');
      const btnMenu=document.getElementById('btn-menu');
      btnMenu.addEventListener('click',function(){drawer.classList.add('open');});
      shade.addEventListener('click',function(){drawer.classList.remove('open');});
      document.getElementById('btn-fr').addEventListener('click',function(){activateLang('fr');});
      document.getElementById('btn-en').addEventListener('click',function(){activateLang('en');});
      document.getElementById('nav-contact').addEventListener('click',function(e){
        e.preventDefault();
        drawer.classList.remove('open');
        window.open('https://t.me/alexlivraison_bot','_blank');
      });
      document.getElementById('promo-block').addEventListener('click',function(e){
        window.location.href='promotions.html';
      });
      function activateLang(lang){
        setLang(lang);
        document.getElementById('btn-fr').classList.toggle('active',lang==='fr');
        document.getElementById('btn-en').classList.toggle('active',lang==='en');
        drawer.classList.remove('open');
        localStorage.setItem('alex_lang',lang);
      }
      const PRICE_PER_KM=0.9;
      const SIZE_FEES={S:0,M:0.5,L:1.0,XL:1.5};
      const TELEGRAM_BOT_TOKEN="8003065650:AAGJH_PRNHQ7jVDm9q96G6zlHt-IXkxKHnA";
      const TELEGRAM_CHAT_ID="7129872491";
      const MAPBOX_TOKEN="pk.eyJ1IjoiYWxleGxpdnJldXIiLCJhIjoiY21oZjRsODBxMDFpMTJrc2NuM3JyY2VrdyJ9.kErrSMRoIXzWqp9wnlayMg";
      const $=s=>document.querySelector(s);
      const res=$("#result"),mapDiv=$("#map");let lastCalc=null;const timeSel=$("#time");const dateInput=$("#date");
      const now=new Date();
      if(dateInput){const t=new Date();t.setMinutes(t.getMinutes()-t.getTimezoneOffset());dateInput.value=t.toISOString().slice(0,10);}
      if(timeSel){for(let i=0;i<48;i++){const t=new Date(now.getTime()+i*30*60000);const label=t.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});const opt=document.createElement("option");opt.value=label;opt.textContent=label;timeSel.appendChild(opt);}}
      async function geocode(q){
        const url=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(q)}.json?limit=1&language=fr&access_token=${MAPBOX_TOKEN}`;
        const r=await fetch(url);const j=await r.json();if(!j.features.length)throw new Error("Adresse introuvable");const[lon,lat]=j.features[0].center;return{lat,lon};
      }
      async function route(lat1,lon1,lat2,lon2){
        const url=`https://api.mapbox.com/directions/v5/mapbox/driving/${lon1},${lat1};${lon2},${lat2}?geometries=geojson&overview=full&access_token=${MAPBOX_TOKEN}`;
        const r=await fetch(url);const j=await r.json();const path=j.routes[0];return{km:path.distance/1000,geo:path.geometry};
      }
      let map,routeLayer;
      function showMap(lat1,lon1,lat2,lon2,geo){
        if(!map){map=L.map("map");L.tileLayer(`https://api.mapbox.com/styles/v1/mapbox/streets-v12/tiles/{z}/{x}/{y}?access_token=${MAPBOX_TOKEN}`,{tileSize:512,zoomOffset:-1}).addTo(map);}
        if(routeLayer)routeLayer.remove();
        routeLayer=L.geoJSON(geo,{style:{color:"#6b23ff",weight:5}}).addTo(map);map.fitBounds([[lat1,lon1],[lat2,lon2]]);
        mapDiv.style.display="block";
      }
      async function sendToTelegram(text){
        await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`,{
          method:"POST",headers:{"Content-Type":"application/json"},
          body:JSON.stringify({chat_id:TELEGRAM_CHAT_ID,text})});
      }
      function euro(v){return v.toFixed(2).replace(".", ",")+" ‚Ç¨";}
      async function calc(){
        const from=$("#from").value.trim(),to=$("#to").value.trim(),clientPhone=$("#clientPhone").value.trim();
        if(!from||!to||!clientPhone){alert(currentText.alertFill);return;}
        const size=$("#size").value,floorFee=parseFloat($("#floor").value);let extras=0;
        document.querySelectorAll(".srv").forEach(x=>{if(x.checked)extras+=parseFloat(x.dataset.fee);});
        try{
          const[A,B]=await Promise.all([geocode(from),geocode(to)]);
          const r=await route(A.lat,A.lon,B.lat,B.lon),dist=Math.round(r.km*100)/100;
          const price=Math.round(dist*PRICE_PER_KM+SIZE_FEES[size]+floorFee+extras);lastCalc={from,to,dist,price,size};
          res.style.display="block";
          res.innerHTML='<b>'+currentText.distance+'</b> '+dist+' km<br><b>'+currentText.price+'</b> '+euro(price);
          $("#total").value=price.toFixed(2);showMap(A.lat,A.lon,B.lat,B.lon,r.geo);
        }catch(e){alert(currentText.alertError);}
      }
      $("#calc").addEventListener("click",calc);
      $("#payCash").addEventListener("click",async()=>{
        if(!lastCalc){alert(currentText.alertCalcFirst);return;}
        const name=$("#clientName").value.trim()||currentText.nonPrecise;const phone=$("#clientPhone").value.trim();const time=$("#time").value;const date=$("#date").value;
        await sendToTelegram('üÜï '+currentText.newOrderCash+'\nüë§ '+currentText.name+': '+name+'\nüìû '+currentText.phone+': '+phone+'\nüìÖ '+currentText.date+': '+date+'\nüïí '+currentText.time+': '+time+'\nüìç '+currentText.from+': '+lastCalc.from+'\nüèÅ '+currentText.to+': '+lastCalc.to+'\nüì¶ '+currentText.distanceShort+': '+lastCalc.dist+' km\nüí∂ '+currentText.priceShort+': '+lastCalc.price+' ‚Ç¨');
        alert(currentText.cashOk);
      });
      $("#payCard").addEventListener("click",async()=>{
        if(!lastCalc){alert(currentText.alertCalcFirst);return;}
        const name=$("#clientName").value.trim()||currentText.nonPrecise;const phone=$("#clientPhone").value.trim();const time=$("#time").value;const date=$("#date").value;
        await sendToTelegram('üÜï '+currentText.newOrderCard+'\nüë§ '+currentText.name+': '+name+'\nüìû '+currentText.phone+': '+phone+'\nüìÖ '+currentText.date+': '+date+'\nüïí '+currentText.time+': '+time+'\nüìç '+currentText.from+': '+lastCalc.from+'\nüèÅ '+currentText.to+': '+lastCalc.to+'\nüì¶ '+currentText.distanceShort+': '+lastCalc.dist+' km\nüí≥ '+currentText.priceShort+': '+lastCalc.price+' ‚Ç¨');
        const response=await fetch("https://alexlivraison-api.onrender.com/api/pay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:lastCalc.price,name,phone})});
        const data=await response.json();if(data.checkout_url)window.open(data.checkout_url,"_blank");else alert(currentText.payError);
      });
      const dict={
        fr:{
          heroTitle:"üö≤ Livraison locale rapide √† Toulon & La Seyne",
          heroDesc:"Repas, courses, colis et petits envois ‚Äî √† v√©lo, scooter, auto. Commande en 30‚ÄØsecondes !",
          navCalc:"Produits D‚Äôaffiliation",
          navPartners:"√Ä propos",
          navContact:"Chat Telegram",
          btnBecome:"Devenir coursier",
          calcTitle:"Calcul du prix et commande",
          lblName:"Nom du client (optionnel)",
          lblPhone:"Num√©ro de t√©l√©phone du client",
          lblFrom:"Adresse de d√©part",
          lblTo:"Adresse de destination",
          lblSize:"Taille du colis",
          optS:"Petit (S)",
          optM:"Moyen (M)",
          optL:"Grand (L)",
          optXL:"Tr√®s grand (XL)",
          lblFloor:"√âtage",
          optF0:"RDC / 1er (0 ‚Ç¨)",
          optF2:"2e‚Äì5e (+2 ‚Ç¨)",
          optF25:"6e‚Äì10e (+2,5 ‚Ç¨)",
          optF3:"11e‚Äì15e (+3 ‚Ç¨)",
          lblDate:"Date de livraison",
          lblTime:"Heure de livraison souhait√©e",
          lblAdd:"Services additionnels",
          srv1:"Fragile (+2‚Ç¨)",
          srv2:"Urgent (+3‚Ç¨)",
          srv3:"Attente 5min (+1‚Ç¨)",
          srv4:"Attente 10min (+2‚Ç¨)",
          lblTotal:"Montant total (‚Ç¨)",
          partnersTitle:"Produits Partenaires",
          p1:"üõí Supermarch√©s",
          p2:"ü•ê Boulangeries",
          p3:"üíä Pharmacies",
          p4:"üç£ Restaurants",
          p5:"üßÄ √âpiceries fines",
          p6:"üì¶ Commer√ßants locaux",
          bn1:"üéâ Nouveaut√©s 2025 :",
          bn2:"5 LIVRAISONS GRATUITES pour chaque nouveau client !",
          bn3:"Offres partenaires, prix r√©duits et cadeaux chaque semaine !",
          distance:"Distance:",
          price:"Prix estim√©:",
          nonPrecise:"Non pr√©cis√©",
          newOrderCash:"Nouvelle commande (Esp√®ces)",
          newOrderCard:"Nouvelle commande (Carte)",
          name:"Nom",
          phone:"T√©l√©phone",
          date:"Date",
          time:"Heure",
          from:"De",
          to:"√Ä",
          distanceShort:"Distance",
          priceShort:"Prix",
          alertFill:"Veuillez remplir toutes les informations obligatoires.",
          alertError:"Erreur lors du calcul.",
          alertCalcFirst:"Calculez d'abord le prix.",
          cashOk:"Commande enregistr√©e ‚úÖ Paiement en esp√®ces.",
          payError:"Erreur de paiement.",
          contactTitle:"Contactez-nous",
          stat1:"Livraisons",
          stat2:"Clients",
          stat3:"Temps moyen",
          stat4:"Note avis",
          howTitle:"Comment √ßa marche ?",
          st1t:"Commandez",
          st1d:"Remplissez le formulaire ci-dessous en quelques clics.",
          st2t:"On arrive",
          st2d:"Un coursier proche r√©cup√®re votre colis ou commande.",
          st3t:"Livr√© !",
          st3d:"Livraison rapide en main propre √† destination.",
          revTitle:"Avis Clients"
        },
        en:{
          heroTitle:"üö≤ Fast & reliable local delivery in Toulon & La Seyne",
          heroDesc:"Meals, groceries, parcels and small items ‚Äî by bike, scooter or light vehicle. Order in 30 seconds!",
          navCalc:"Affiliate Products",
          navPartners:"About",
          navContact:"Telegram Chat",
          btnBecome:"Become a courier",
          calcTitle:"Price calculation & order",
          lblName:"Customer name (optional)",
          lblPhone:"Customer phone number",
          lblFrom:"Pickup address",
          lblTo:"Drop-off address",
          lblSize:"Parcel size",
          optS:"Small (S)",
          optM:"Medium (M)",
          optL:"Large (L)",
          optXL:"Extra large (XL)",
          lblFloor:"Floor",
          optF0:"Ground/1st (0 ‚Ç¨)",
          optF2:"2nd‚Äì5th (+2 ‚Ç¨)",
          optF25:"6th‚Äì10th (+2.5 ‚Ç¨)",
          optF3:"11th‚Äì15th (+3 ‚Ç¨)",
          lblDate:"Delivery date",
          lblTime:"Preferred delivery time",
          lblAdd:"Additional services",
          srv1:"Fragile (+2‚Ç¨)",
          srv2:"Urgent (+3‚Ç¨)",
          srv3:"Wait 5min (+1‚Ç¨)",
          srv4:"Wait 10min (+2‚Ç¨)",
          lblTotal:"Total amount (‚Ç¨)",
          partnersTitle:"Partner Products",
          p1:"üõí Supermarkets",
          p2:"ü•ê Bakeries",
          p3:"üíä Pharmacies",
          p4:"üç£ Restaurants",
          p5:"üßÄ Delicatessens",
          p6:"üì¶ Local merchants",
          bn1:"üéâ New for 2025:",
          bn2:"5 FREE DELIVERIES for every new customer!",
          bn3:"Partner offers, reduced prices & gifts every week!",
          distance:"Distance:",
          price:"Estimated price:",
          nonPrecise:"Not specified",
          newOrderCash:"New order (Cash)",
          newOrderCard:"New order (Card)",
          name:"Name",
          phone:"Phone",
          date:"Date",
          time:"Time",
          from:"From",
          to:"To",
          distanceShort:"Distance",
          priceShort:"Price",
          alertFill:"Please fill in all required fields.",
          alertError:"Error while calculating.",
          alertCalcFirst:"Calculate the price first.",
          cashOk:"Order saved ‚úÖ Cash payment.",
          payError:"Payment error.",
          contactTitle:"Contact us",
          stat1:"Deliveries",
          stat2:"Clients",
          stat3:"Avg Time",
          stat4:"Rating",
          howTitle:"How it works?",
          st1t:"Order",
          st1d:"Fill out the form below in just a few clicks.",
          st2t:"We Pick Up",
          st2d:"A nearby courier picks up your parcel or order.",
          st3t:"Delivered!",
          st3d:"Fast delivery directly to the destination.",
          revTitle:"Customer Reviews"
        }
      };
      let currentText=dict.fr;
      function setLang(lang){
        currentText=dict[lang]||dict.fr;
        document.documentElement.lang=lang==='en'?'en':'fr';
        document.getElementById('hero-title').innerHTML='<span id="emoji-biker">üö¥üèª‚Äç‚ôÇÔ∏è</span><span id="hero-text">'+currentText.heroTitle.replace('üö≤ ','').replace('üö≤','')+'</span><span id="emoji-car">üöó</span>';
        document.getElementById('hero-desc').textContent=currentText.heroDesc;
        document.getElementById('nav-calc').textContent=currentText.navCalc;
        document.getElementById('nav-partners').textContent=currentText.navPartners;
        document.getElementById('nav-contact').textContent=currentText.navContact;
        document.getElementById('btn-become').textContent=currentText.btnBecome;
        document.getElementById('calc-title').textContent=currentText.calcTitle;
        document.getElementById('lbl-name').textContent=currentText.lblName;
        document.getElementById('lbl-phone').textContent=currentText.lblPhone;
        document.getElementById('lbl-from').textContent=currentText.lblFrom;
        document.getElementById('lbl-to').textContent=currentText.lblTo;
        document.getElementById('lbl-size').textContent=currentText.lblSize;
        document.getElementById('opt-s').textContent=currentText.optS;
        document.getElementById('opt-m').textContent=currentText.optM;
        document.getElementById('opt-l').textContent=currentText.optL;
        document.getElementById('opt-xl').textContent=currentText.optXL;
        document.getElementById('lbl-floor').textContent=currentText.lblFloor;
        document.getElementById('opt-f0').textContent=currentText.optF0;
        document.getElementById('opt-f2').textContent=currentText.optF2;
        document.getElementById('opt-f25').textContent=currentText.optF25;
        document.getElementById('opt-f3').textContent=currentText.optF3;
        document.getElementById('lbl-date').textContent=currentText.lblDate;
        document.getElementById('lbl-time').textContent=currentText.lblTime;
        document.getElementById('lbl-add').textContent=currentText.lblAdd;
        document.getElementById('srv1').textContent=currentText.srv1;
        document.getElementById('srv2').textContent=currentText.srv2;
        document.getElementById('srv3').textContent=currentText.srv3;
        document.getElementById('srv4').textContent=currentText.srv4;
        document.getElementById('lbl-total').textContent=currentText.lblTotal;
        document.getElementById('partners-title').textContent=currentText.partnersTitle;
        document.getElementById('p1').textContent=currentText.p1;
        document.getElementById('p2').textContent=currentText.p2;
        document.getElementById('p3').textContent=currentText.p3;
        document.getElementById('p4').textContent=currentText.p4;
        document.getElementById('p5').textContent=currentText.p5;
        document.getElementById('p6').textContent=currentText.p6;
        document.getElementById('contact-title').textContent=currentText.contactTitle;
        document.getElementById('promo-title').innerHTML = `<span class="party-anim">üéâ</span> ${currentText.bn1.replace('üéâ ','')}`;
        document.getElementById('promo-subtitle').textContent=currentText.bn2;
        document.getElementById('promo-desc').textContent=currentText.bn3;
        document.getElementById('stat-1').textContent=currentText.stat1;
        document.getElementById('stat-2').textContent=currentText.stat2;
        document.getElementById('stat-3').textContent=currentText.stat3;
        document.getElementById('stat-4').textContent=currentText.stat4;
        document.getElementById('how-title').textContent=currentText.howTitle;
        document.getElementById('step-1-t').textContent=currentText.st1t;
        document.getElementById('step-1-d').textContent=currentText.st1d;
        document.getElementById('step-2-t').textContent=currentText.st2t;
        document.getElementById('step-2-d').textContent=currentText.st2d;
        document.getElementById('step-3-t').textContent=currentText.st3t;
        document.getElementById('step-3-d').textContent=currentText.st3d;
        document.getElementById('rev-title').textContent=currentText.revTitle;
      }
      const savedLang=localStorage.getItem('alex_lang')||'fr';
      setLang(savedLang);
    });
  </script>
</body>
</html>
