<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alex Livraison üö¥‚Äç‚ôÇÔ∏è</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #4b0082;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .container {
      background-color: #fff;
      color: #333;
      border-radius: 12px;
      width: 90%;
      max-width: 450px;
      margin: 50px auto;
      padding: 25px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button {
      background-color: #6a0dad;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #500c8e;
    }
    .footer {
      margin-top: 30px;
      font-size: 15px;
      color: #fff;
    }
    .info {
      margin-top: 10px;
      background: #f4f4f4;
      padding: 10px;
      border-radius: 8px;
      color: #222;
    }
    h1 {
      color: #fff;
    }
  </style>
</head>
<body>
  <h1>Alex Livraison üöóüö¥‚Äç‚ôÇÔ∏è</h1>

  <div class="container">
    <h2>Calculateur de Livraison</h2>
    <input id="origin" type="text" placeholder="Adresse de d√©part">
    <input id="destination" type="text" placeholder="Adresse de destination">
    
    <label for="size">Taille du colis üì¶</label>
    <select id="size">
      <option value="S">Petit (S)</option>
      <option value="M">Moyen (M)</option>
      <option value="L">Grand (L)</option>
      <option value="XL">Tr√®s grand (XL)</option>
    </select>

    <label for="time">Heure de livraison souhait√©e ‚è∞</label>
    <input id="time" type="datetime-local">

    <button onclick="calculateDelivery()">Calculer le prix</button>

    <div id="result" class="info"></div>
    <button id="payButton" style="display:none;" onclick="pay()">Payer via Revolut üí≥</button>
  </div>

  <div class="footer">
    üöÄ Livraison locale 24h/24 et 7j/7 dans le Var (Toulon, La Seyne, Ollioules, etc.)  
    <br>Repas, courses, m√©dicaments et colis ‚Äì rapide et fiable üí™
  </div>

  <script>
    let distanceKm = 0;
    const baseRate = 2.5;
    const sizeRates = { S: 0, M: 2, L: 4, XL: 6 };

    function calculateDelivery() {
      const origin = document.getElementById('origin').value;
      const destination = document.getElementById('destination').value;
      const size = document.getElementById('size').value;
      const time = document.getElementById('time').value;

      if (!origin || !destination) {
        alert('Veuillez entrer les deux adresses.');
        return;
      }

      const service = new google.maps.DistanceMatrixService();
      service.getDistanceMatrix(
        {
          origins: [origin],
          destinations: [destination],
          travelMode: 'DRIVING',
          unitSystem: google.maps.UnitSystem.METRIC
        },
        (response, status) => {
          if (status !== 'OK') {
            alert('Erreur de calcul: ' + status);
            return;
          }

          const distanceText = response.rows[0].elements[0].distance.text;
          distanceKm = parseFloat(distanceText.replace(',', '.'));
          const price = (distanceKm * baseRate + sizeRates[size]).toFixed(2);

          document.getElementById('result').innerHTML =
            `<b>Distance estim√©e :</b> ${distanceKm} km<br>` +
            `<b>Prix total estim√© :</b> ${price} ‚Ç¨<br>` +
            `<b>Heure souhait√©e :</b> ${time || 'Non sp√©cifi√©e'}`;

          document.getElementById('payButton').style.display = 'block';
          document.getElementById('payButton').setAttribute('data-amount', price);
        }
      );
    }

    function pay() {
      const price = document.getElementById('payButton').getAttribute('data-amount');
      window.open(`https://checkout.revolut.com/pay/10d5b369-d7f0-43cb-a810-af4c7afe9d27?amount=${price}`, '_blank');
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaUyjOAjx9TNonfUF5psKSpxunrgr2h6g&libraries=places">
  </script>
</body>
</html>
