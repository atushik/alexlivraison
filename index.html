<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸš—AlexLivraisonğŸš´ğŸ»â€â™‚ï¸</title>

<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    background-attachment: fixed;
    margin: 0;
    color: #333;
  }

  .container {
    max-width: 480px;
    margin: 30px auto;
    background: white;
    border-radius: 20px;
    padding: 25px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  }

  h1 {
    text-align: center;
    color: white;
    margin-bottom: 20px;
    text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
  }

  label {
    font-weight: 600;
    display: block;
    margin-top: 15px;
  }

  input, select {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    margin-top: 5px;
  }

  .button {
    display: block;
    width: 100%;
    text-align: center;
    padding: 12px;
    border-radius: 10px;
    border: none;
    color: white;
    font-size: 16px;
    font-weight: bold;
    margin-top: 12px;
    cursor: pointer;
  }

  .calc { background-color: #6a11cb; }
  .card { background-color: #8e2de2; }
  .cash { background-color: #999; }

  .services {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  #result {
    background: #f4f4f4;
    margin-top: 15px;
    padding: 10px;
    border-radius: 8px;
    font-size: 15px;
  }

  #map {
    height: 200px;
    margin-top: 15px;
    border-radius: 8px;
  }

  footer {
    text-align: center;
    color: white;
    font-size: 14px;
    margin-top: 20px;
  }
</style>
</head>

<body>
  <h1>ğŸš—AlexLivraisonğŸš´ğŸ»â€â™‚ï¸</h1>

  <div class="container">
    <label>Adresse de dÃ©part</label>
    <input type="text" id="start" placeholder="2 Rue Beaussier, Toulon" />

    <label>Adresse de destination</label>
    <input type="text" id="end" placeholder="241 Rue Le Corbusier, La Seyne-sur-Mer" />

    <label>Taille du colis ğŸ“¦</label>
    <select id="size">
      <option value="S">Petit (S)</option>
      <option value="M">Moyen (M)</option>
      <option value="L">Grand (L)</option>
      <option value="XL">TrÃ¨s grand (XL)</option>
    </select>

    <label>Ã‰tage (optionnel)</label>
    <select id="floor">
      <option value="0">RDC / 1er (0 â‚¬)</option>
      <option value="1">2e â€“ 4e Ã©tage (+2 â‚¬)</option>
      <option value="2">5e â€“ 10e Ã©tage (+3 â‚¬)</option>
      <option value="3">11e â€“ 15e Ã©tage (+4 â‚¬)</option>
    </select>

    <label>Services additionnels</label>
    <div class="services">
      <label><input type="checkbox" class="service" value="2"> Colis fragile (+2â‚¬)</label>
      <label><input type="checkbox" class="service" value="3"> Livraison urgente (+3â‚¬)</label>
      <label><input type="checkbox" class="service" value="1"> Attente 5 min (+1â‚¬)</label>
      <label><input type="checkbox" class="service" value="2"> Attente 10 min (+2â‚¬)</label>
    </div>

    <label>Heure de livraison souhaitÃ©e</label>
    <input type="datetime-local" id="time" />

    <button class="button calc" onclick="calculatePrice()">ğŸ§® Calculer le prix</button>
    <button class="button card" onclick="payByCard()">ğŸ’³ Paiement par carte</button>
    <button class="button cash">ğŸ’¶ Paiement en espÃ¨ces</button>

    <div id="result"></div>
    <div id="map"></div>
  </div>

  <footer>
    ğŸ’œ Nous livrons vos commandes jusquâ€™Ã  votre porte ğŸ’œ<br>
    Â© 2025 Alex Livraison
  </footer>

<script>
  async function calculatePrice() {
    const start = document.getElementById("start").value;
    const end = document.getElementById("end").value;
    const size = document.getElementById("size").value;
    const floor = parseInt(document.getElementById("floor").value);
    const services = document.querySelectorAll(".service:checked");
    let extras = 0;
    services.forEach(s => extras += parseFloat(s.value));

    if (!start || !end) {
      document.getElementById("result").innerHTML = "âš ï¸ Entrez les deux adresses.";
      return;
    }

    // API distance (OpenRouteService)
    const apiKey = "5b3ce3597851110001cf6248xxxxxxxxxxxxxxxxxx"; // <-- Remplace par ta clÃ© OpenRouteService
    const url = https://api.openrouteservice.org/v2/directions/driving-car?api_key=${apiKey}&start=${encodeURIComponent(start)}&end=${encodeURIComponent(end)};

    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error("Erreur API distance");
      const data = await response.json();

      const distance = data.features[0].properties.summary.distance / 1000;
      let price = 2 + distance * 0.8;

      if (size === "M") price += 1;
      if (size === "L") price += 2;
      if (size === "XL") price += 3;
      price += extras;
      price += floor;

      price = price.toFixed(2);

      document.getElementById("result").innerHTML =
        ğŸš— Distance : ${distance.toFixed(2)} km<br>ğŸ’° Prix total : ${price} â‚¬;

      window.currentPrice = price;
    } catch (err) {
      document.getElementById("result").innerHTML = "Erreur lors du calcul. VÃ©rifiez les adresses.";
    }
  }

  function payByCard() {
    if (!window.currentPrice) {
      alert("Veuillez d'abord calculer le prix !");
      return;
    }
    const amount = window.currentPrice;
    const link = https://checkout.revolut.com/pay/10d5b369-d7f0-43cb-a810-af4c7afe9d27?amount=${amount};
    window.open(link, "_blank");
  }
</script>

</body>
</html>
