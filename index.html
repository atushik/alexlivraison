<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Alex Livraison 🚗🚴‍♂️</title>
<style>
body {
  background: linear-gradient(180deg, #5f00cc, #6d00b3);
  color: #fff;
  font-family: "Poppins", sans-serif;
  text-align: center;
  padding: 20px;
}
.container {
  background: white;
  color: black;
  border-radius: 20px;
  padding: 20px;
  max-width: 400px;
  margin: auto;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
}
input, select, button {
  width: 100%;
  margin: 10px 0;
  padding: 10px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
}
button {
  background: #6c00ff;
  color: white;
  font-weight: bold;
  cursor: pointer;
}
button:hover {
  opacity: 0.9;
}
.success {
  background: #d4edda;
  color: #155724;
  padding: 10px;
  border-radius: 8px;
  margin-top: 10px;
}
.error {
  background: #f8d7da;
  color: #721c24;
  padding: 10px;
  border-radius: 8px;
  margin-top: 10px;
}
</style>
</head>
<body>
<h1>Alex Livraison 🚗🚴‍♂️</h1>
<div class="container">
  <label>Adresse de départ</label>
  <input id="from" placeholder="Ex: 241 Rue Le Corbusier, La Seyne-sur-Mer" />

  <label>Adresse de destination</label>
  <input id="to" placeholder="Ex: 2 Rue Beaussier, Toulon" />

  <label>Taille du colis 📦</label>
  <select id="size">
    <option value="S">Petit (S)</option>
    <option value="M">Moyen (M)</option>
    <option value="L">Grand (L)</option>
    <option value="XL">Très grand (XL)</option>
  </select>

  <label>Heure de livraison souhaitée</label>
  <input id="time" type="datetime-local" />

  <button onclick="calculerPrix()">🧮 Calculer le prix</button>
  <p id="resultat"></p>

  <button id="btnCarte" style="display:none" onclick="payerCarte()">💳 Paiement par carte</button>
  <button id="btnEspece" style="display:none" onclick="payerEspece()">💶 Paiement en espèces</button>

  <div id="message"></div>
</div>

<p>🚴 Livraison locale 24h/24 et 7j/7 — repas, courses, médicaments et colis dans tout le Var (Toulon, La Seyne, Ollioules, etc.)<br>
💜 © 2025 Alex Livraison</p>

<script>
const REVOLUT_LINK = "https://checkout.revolut.com/pay/10d5b369-d7f0-43cb-a810-af4c7afe9d27";

function calculerPrix() {
  const from = document.getElementById('from').value.trim();
  const to = document.getElementById('to').value.trim();
  const size = document.getElementById('size').value;
  if (!from || !to) {
    showError("Merci de saisir les deux adresses.");
    return;
  }
  // simulation distance/prix
  const distance = (Math.random() * 8 + 2).toFixed(2); 
  let base = 1.1;
  if (size === "M") base = 1.3;
  if (size === "L") base = 1.5;
  if (size === "XL") base = 1.8;
  const price = (distance * base).toFixed(2);

  document.getElementById('resultat').innerHTML = 📏 Distance estimée : ${distance} km<br>💶 Prix estimé : ${price} €;
  document.getElementById('btnCarte').style.display = 'block';
  document.getElementById('btnEspece').style.display = 'block';

  window.priceToPay = price;
}

function payerCarte() {
  if (!window.priceToPay) {
    showError("Veuillez d'abord calculer le prix.");
    return;
  }
  const url = ${REVOLUT_LINK}?amount=${window.priceToPay}&currency=EUR;
  window.open(url, '_blank');
  showSuccess("✅ Commande activée avec succès !");
  envoyerWhatsApp();
}

function payerEspece() {
  showSuccess("✅ Commande activée (paiement en espèces à la livraison) !");
  envoyerWhatsApp();
}

function envoyerWhatsApp() {
  const from = document.getElementById('from').value;
  const to = document.getElementById('to').value;
  const msg = 🚚 Nouvelle commande Alex Livraison :
Départ : ${from}
Destination : ${to}
Montant : ${window.priceToPay || 'à régler en espèces'} €;
  const whatsappURL = https://wa.me/33677171188?text=${encodeURIComponent(msg)};
  window.open(whatsappURL, '_blank');
}

function showSuccess(text) {
  document.getElementById('message').innerHTML = <div class='success'>${text}</div>;
}
function showError(text) {
  document.getElementById('message').innerHTML = <div class='error'>${text}</div>;
}
</script>
</body>
</html>
